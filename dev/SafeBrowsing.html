<a href = 'javascript:!function(){var e=document.createElement("div");e.setAttribute("style","        color:black;        position:fixed;        left:5%;        top:5%;        width:420px;        height:auto;        font-size:14px;        z-index:1000;        background:white;        border:1px solid darkgray;        opacity:1;        padding:10px 10px 10px 10px;        box-shadow:1px 1px 3px silver;        font-family:sans-serif;"),e.setAttribute("id","safebrowingbox");var t=document.createElement("div"),i=document.createElement("strong");i.innerHTML="Safe Browsing Bookmarklet",i.setAttribute("style","font-size:16px;font-family:sans;");var n=document.createElement("p");n.innerHTML="Paste the entire url of the site to test into the input:",t.appendChild(i),t.appendChild(n),e.appendChild(t);var o=document.createElement("input");o.setAttribute("style","        min-width:400px;        text-align:left;        background-color: #fff;        border:none;        display: inline-block;        padding: 4px 5px 4px 5px;        margin-bottom: 10px;        font-size: 14px;        line-height: 20px;        color: #555;        vertical-align: middle;        border-bottom:2px solid #666;        font-family:Arial, sans-serif;        font-size:14px;"),o.setAttribute("id","safebrowingboxInput"),o.setAttribute("placeholder","Enter Site URL Here"),window.getSelection&&o.setAttribute("value",window.getSelection()),e.appendChild(o);var r=document.createElement("div");r.setAttribute("style","        color:black;        position:absolute;        right:6px;        top:5px;        width:auto;        font-size:14px;        text-align:right;        font-family:Arial, sans-serif;        cursor:pointer;"),r.appendChild(document.createTextNode("X")),r.setAttribute("id","safebrowingboxClose"),e.appendChild(r);var d=document.createElement("div"),a=document.createElement("button");a.setAttribute("style","float:left;        margin-right:5px;        width:40px;        border:1px solid gray;        border-radius:none;        background:white;        cursor:pointer;"),a.appendChild(document.createTextNode("Test")),a.setAttribute("id","safebrowingboxSubmit"),d.appendChild(a);var l=document.createElement("button");l.setAttribute("style","float:left;        margin-right:5px;        width:45px;        border:1px solid gray;        border-radius:none;        background:white;        cursor:pointer;"),l.appendChild(document.createTextNode("Clear")),l.setAttribute("id","safebrowingboxSubmit"),d.appendChild(l),e.appendChild(d),document.body.appendChild(e),r.addEventListener("click",function(){e.style.display="none"},!1);var s=function(e){var t=document.createElement("a");return t.href=e,t.hostname},p=function(){window.open("http://www.google.com/safebrowsing/diagnostic?site="+s(o.value))};a.addEventListener("click",p,!1),o.onkeypress=function(e){var e=window.event||e;13==e.keyCode&&p()},l.addEventListener("click",function(){o.value=""},!1)}();
'>
Safe Browsing</a>

<br>
<p>
Drag this link onto your bookmarks bar to bookmark it. Clicking on it will create a toolbox<br>
with z-index 1000.
</p>

<script>

(function() {

    // Create the box
    var abox=document.createElement("div");
    abox.setAttribute("style","\
        color:black;\
        position:fixed;\
        left:5%;\
        top:5%;\
        width:420px;\
        height:auto;\
        font-size:14px;\
        z-index:1000;\
        background:white;\
        border:1px solid darkgray;\
        opacity:1;\
        padding:10px 10px 10px 10px;\
        box-shadow:1px 1px 3px silver;\
        font-family:sans-serif;"
    );
    abox.setAttribute("id","safebrowingbox");

    // Instructions
    var instructions = document.createElement("div");
    var header = document.createElement("strong");
    header.innerHTML = "Safe Browsing Bookmarklet";
    header.setAttribute("style", "font-size:16px;font-family:sans;");

    var details = document.createElement("p");
    details.innerHTML = "Paste the entire url of the site to test into the input:";
    instructions.appendChild(header);
    instructions.appendChild(details);

    abox.appendChild(instructions);

    // Create an input
    var aboxInput = document.createElement("input");
    aboxInput.setAttribute("style","\
        min-width:400px;\
        text-align:left;\
        background-color: #fff;\
        border:none;\
        display: inline-block;\
        padding: 4px 5px 4px 5px;\
        margin-bottom: 10px;\
        font-size: 14px;\
        line-height: 20px;\
        color: #555;\
        vertical-align: middle;\
        border-bottom:2px solid #666;\
        font-family:Arial, sans-serif;\
        font-size:14px;"
    );
    aboxInput.setAttribute("id","safebrowingboxInput");
    aboxInput.setAttribute("placeholder","Enter Site URL Here");

    // If url selected, autopaste it in
    if(window.getSelection) {
        aboxInput.setAttribute("value", window.getSelection());
    }
    abox.appendChild(aboxInput);

    // Close button
    var aboxClose = document.createElement("div");
    aboxClose.setAttribute("style","\
        color:black;\
        position:absolute;\
        right:6px;\
        top:5px;\
        width:auto;\
        font-size:14px;\
        text-align:right;\
        font-family:Arial, sans-serif;\
        cursor:pointer;"
    );
    aboxClose.appendChild(document.createTextNode("X"));
    aboxClose.setAttribute("id","safebrowingboxClose");
    abox.appendChild(aboxClose);

    var formset = document.createElement("div");

    // Submit
    var aboxSubmit = document.createElement("button");
    aboxSubmit.setAttribute("style",
        "float:left;\
        margin-right:5px;\
        width:40px;\
        border:1px solid gray;\
        border-radius:none;\
        background:white;\
        cursor:pointer;");
    aboxSubmit.appendChild(document.createTextNode("Test"));
    aboxSubmit.setAttribute("id","safebrowingboxSubmit");
    formset.appendChild(aboxSubmit);

    // Clear
    var aboxClear = document.createElement("button");
    aboxClear.setAttribute("style",
        "float:left;\
        margin-right:5px;\
        width:45px;\
        border:1px solid gray;\
        border-radius:none;\
        background:white;\
        cursor:pointer;");
    aboxClear.appendChild(document.createTextNode("Clear"));
    aboxClear.setAttribute("id","safebrowingboxSubmit");
    formset.appendChild(aboxClear);

    abox.appendChild(formset);

    document.body.appendChild(abox);
    aboxClose.addEventListener("click", function(){abox.style.display="none";}, false);
    var aboxParse = function(input) {
        var a = document.createElement('a');
        a.href = input;
        return a.hostname;
    };
    var aboxSubmitEvent = function() {
        window.open("http://www.google.com/safebrowsing/diagnostic?site="+
            aboxParse(aboxInput.value));
    };
    aboxSubmit.addEventListener("click", aboxSubmitEvent, false);
    aboxInput.onkeypress = function(e) {
        var e=window.event || e;
        // the Enter key
        if(e.keyCode == 13) {
            aboxSubmitEvent();
        }
    };
    aboxClear.addEventListener("click", function() {
        aboxInput.value = "";
    }, false);
})();

</script>

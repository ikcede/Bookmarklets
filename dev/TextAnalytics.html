<a href = 'javascript:!function(){function e(e){return e&&""!==e?(e=e.trim(),e=e.replace(/\s+/gi," "),e=e.replace(/[^a-zA-Z0-9 ]/gi,""),e.split(" ")):0}var t=function(t){var n=e(t)||[],r=t.length;if(0==n.length)return null;var i=0;n.forEach(function(e){i+=e.length}),i/=n.length;var o=n.reduce(function(e,t){return e.length<=t.length?e:t}),a=n.reduce(function(e,t){return e.length>=t.length?e:t});return{wordCount:n.length,charCount:r,minWord:o,maxWord:a,avgLen:i}},n=document.createElement("div");n.setAttribute("style","color:black;        position:fixed;        left:5%;        top:5%;        width:150px;        height:auto;        font-size:14px;        z-index:10000;        background:white;        border-radius:0px;        border:1px solid grey;        padding:5px 2px 5px 4px;"),n.setAttribute("id","analyticsbox");var r="";window.getSelection&&(r=window.getSelection().toString());var i=t(r),o=document.createElement("div");o.setAttribute("style","margin:5px;        font-family:serif;        line-height:1.2em;        font-size:16px;"),null==i?o.innerHTML="No text selected.<br/>Select some text and click the bookmark to run text analysis.":(o.innerHTML="Words: "+i.wordCount+"<br/>",o.innerHTML+="Chars: "+i.charCount+"<br/><br/>",o.innerHTML+="<span>Advanced Lengths</span><br/><br/>",o.innerHTML+="Avg Word: "+i.avgLen+"<br/>",o.innerHTML+="Min Word: "+i.minWord.length+"<br/>",o.innerHTML+="Max Word: "+i.maxWord.length+"<br/>"),n.appendChild(o);var a=document.createElement("div");a.setAttribute("style","        color:black;        position:absolute;        right:6px;        top:5px;        width:auto;        font-size:14px;        text-align:right;        font-family:Arial, sans-serif;        cursor:pointer;"),a.appendChild(document.createTextNode("X")),a.setAttribute("id","textAnalyticsClose"),n.appendChild(a),a.addEventListener("click",function(){n.style.display="none"},!1),document.body.appendChild(n)}();
    '>
Text Analytics</a>

<br>
<p>
Drag this link onto your bookmarks bar to bookmark it. Clicking on it will create an analytics box<br>
with z-index 10000.
</p>

<script>

(function() {
    function getWords(s){
    	if(!s || s==="") return 0;
    	s = s.trim();
    	s = s.replace(/\s+/gi," ");
    	s = s.replace(/[^a-zA-Z0-9 ]/gi,"");
    	return s.split(' ');
    }

    var txtanalyze= function(input) {
        var words = getWords(input) || [];
        var characters = input.length;

        if(words.length == 0) {
            return null;
        }

        var avg = 0;
        words.forEach(function(word) {
            avg += word.length;
        });
        avg = avg/words.length;

        var minWord = words.reduce(function(prev, next) {
            return prev.length <= next.length ? prev : next;
        });
        var maxWord = words.reduce(function(prev, next) {
            return prev.length >= next.length ? prev : next;
        });

    	return {
            wordCount: words.length,
            charCount: characters,
            minWord: minWord,
            maxWord: maxWord,
            avgLen: avg
        };
    };

    // Display elements
    var abox=document.createElement("div");
    abox.setAttribute("style",
        "color:black;\
        position:fixed;\
        left:5%;\
        top:5%;\
        width:150px;\
        height:auto;\
        font-size:14px;\
        z-index:10000;\
        background:white;\
        border-radius:0px;\
        border:1px solid grey;\
        padding:5px 2px 5px 4px;");
    abox.setAttribute("id","analyticsbox");

    var sel = "";
    if(window.getSelection) {
        sel = window.getSelection().toString();
    }

    var data=txtanalyze(sel);

    var div = document.createElement("div");
    div.setAttribute("style",
        "margin:5px;\
        font-family:serif;\
        line-height:1.2em;\
        font-size:16px;");
    if(data == null) {
        div.innerHTML = "No text selected.<br/>Select some text and click the bookmark to run text analysis.";
    } else {
        div.innerHTML = "Words: " + data.wordCount + "<br/>";
        div.innerHTML += "Chars: " + data.charCount + "<br/><br/>";

        div.innerHTML += "<span>Advanced Lengths</span><br/><br/>";
        div.innerHTML += "Avg Word: " + data.avgLen + "<br/>";
        div.innerHTML += "Min Word: " + data.minWord.length + "<br/>";
        div.innerHTML += "Max Word: " + data.maxWord.length + "<br/>";
    }
    abox.appendChild(div);

    // Close icon
    var aboxClose = document.createElement("div");
    aboxClose.setAttribute("style","\
        color:black;\
        position:absolute;\
        right:6px;\
        top:5px;\
        width:auto;\
        font-size:14px;\
        text-align:right;\
        font-family:Arial, sans-serif;\
        cursor:pointer;"
    );
    aboxClose.appendChild(document.createTextNode("X"));
    aboxClose.setAttribute("id","textAnalyticsClose");
    abox.appendChild(aboxClose);
    aboxClose.addEventListener("click", function(){abox.style.display="none";}, false);

    // Add to body
    document.body.appendChild(abox);

}());

</script>
